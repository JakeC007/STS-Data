---
title: "Submission"
author: "Jake Chanenson and Adriana Knight"
date: "5/7/2021"
output: pdf_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
library(foreign)      
library(ggplot2)      
library(colorspace)   #better colors for ggplot
library(tidyverse)    
library(dplyr)
library(gridExtra)
library(viridis)
library(ggridges)
library(broom)
library(stargazer)
library(corrr)
library(GGally)
library(RColorBrewer)
library(grid)
library(likert) # for creating a likert plot
library(kableExtra) # not needed but makes the table nicer
echoval <- F
load("../../Pew/pewTech.RData")
```


https://docs.google.com/document/d/1Omlr2cpmMBdgSE8haPFzKQSpPuO8OWO681qwiMvXYfk/edit

## Introduction 

Our physical and digital lives have been increasingly entwined during the first two decades of the twenty first century. A direct consequence of this entailment is the advent of what social psychologist Shoshana Zuboff calls "Surveillance Capitalism" – an economic model where a user’s personal data is commodified for profit generation. The commodification of personal data comes at the cost of user privacy as companies hoover up any and all quantifiable metrics about a given user. As such, it is now more important than ever to understand how the American people feel about issues surrounding the use of their data and their privacy. We choose two aspects of digital privacy to focus on: public sentiment surrounding right to be forgotten (RTBF) -- a privilege for people to remove photos, documents, and videos of themselves from public internet search -- and the privacy threat of Facial Recognition Technologies.    


## Key Figure 1

```{r RTBF, echo=echoval}
levels(pew$PUBLICDATA_W49) <- c("Find others' information","Keep their own information private", "Refused")
pew %>% drop_na(PUBLICDATA_W49) %>% drop_na(sumRTBF) %>% filter(PUBLICDATA_W49 != "Refused") %>% ggplot(aes(x = PUBLICDATA_W49, fill = as.factor(sumRTBF))) +
  geom_bar(position = "dodge", color = 'black') +
  labs (
    title = "Attitudes on How Many Categories of Data Should Be Protected by\n\"The Right To Be Forgotten\" by Stance on Personal Data",
    x = "Participants find it more important to...",
    y = "",
    caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy"
  ) +
  scale_fill_brewer(palette="YlGnBu", name = "How many of the following\ncategories of data should\nfall under the Right To Be Forgotten:\n   -Data collected by law enforcement\n   -Employment history or work record\n   -Negative media coverage\n   -Potentially embarassing photos or\n     videos", labels=c("None","One","Two","Three","Four"))+
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
        panel.background = element_blank(), axis.line = element_line(colour = "black"))
```


### Explanation of Key Figure 1
BLAH BLAH BLAH BLAH.....
BLAH
BLAH
BLAH
BLAH BLAH 


## Key Figure 2

```{r FACE3, echo= echoval, message=FALSE}
#TODO: deal with POS fig.cap = "Key Figure 2", fig.pos = "!H"
###Data Manipulation###
## Create df of FACE3
df_f3 <- pew %>% filter(FACE3a_W49 != "No Answer" & FACE3b_W49 != "No Answer" & FACE3c_W49 != "No Answer") %>% filter(FACE3a_W49 != "Refused" & FACE3b_W49 != "Refused" & FACE3c_W49 != "Refused") %>%  dplyr::select(c(FACE3a_W49, FACE3b_W49, FACE3c_W49, groupKnow))

## Rename Cols
df_f3  <- df_f3  %>% 
  rename("Advertisers' Use Of Facial Recognition" = FACE3a_W49,
          "Tech Companies' Use Of Facial Recognition" = FACE3b_W49,
          "Law Enforcement's Use Of Facial Recognition" = FACE3c_W49)
df_f3  <- as.data.frame(df_f3)
df_f3 <- droplevels(df_f3) #remove unused levels 
df_f3 <- df_f3[, c(3,2,1,4)] #change order of cols for facets to come in nice order

## Reverse levels 
df_f3.reverse <- reverse.levels(df_f3)

                            
## Generate Title
title2 <- "Trust In Responsible Use Of Facial Recognition Tech\nFaceted on Tech Literacy"

###Data Viz###
## Centerd, No Percents 
plot(likert(df_f3.reverse[,c(1:3)], grouping = df_f3.reverse[,4]), legend.position="right", centered = TRUE, plot.percents=TRUE, plot.percent.low=FALSE, plot.percent.high=FALSE, plot.percent.neutral=FALSE, center = 2.5) + 
  scale_fill_manual(values = brewer.pal(n=4,"RdBu"), breaks = c("Not at all", "Not too much", "Somewhat", "A great deal")) + #order and color the likert boxes
  ggtitle(title2) +
  labs(caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy")+
  guides(fill = guide_legend(title="Responses", reverse = TRUE)) #to reverse the order in the legend
```


### Explanation of Key Figure 2
BLAH BLAH BLAH BLAH.....
BLAH
BLAH
BLAH
BLAH BLAH 

TODO: add a LATEX cmd for pagebreak here (\ pagebreak) 
## Appdendix 

### Description of Dataset

The dataset we used is the 2019 PEW Survey on American Trends on Technology. The full citation for this data set
is as follows:

Pew Research Center. (2019). American Trends Panel (W49). Retrieved from https://www.dropbox.com/sh
/adyrtaju2jd7a2d/AAC2fmHoYs2SwVYKqCIkTxOsa?dl=0

The data set is a sample of 4272 respondents of people 18 years or older living in the US. This sample
consisted of both English and Spanish-language survey takers. The methodology also details the stratified
sampling. I have copied the statement from the methodology section below:

> The ATP subsample was selected by grouping panelists into seven stratum 1. Non-internet panelists. There were 691 total panelists in this stratum and they are sampled at a rate of 100% 2. HS or less panelists. There were 2,027 total panelists in this stratum and they are sampled at a rate of 98.9%. 2,005 panelists were selected for Wave 49. 3. Hispanic, Unregistered or Non-volunteers. There were 5,312 total panelists in this stratum and they are sampled at a rate of 44.8%. 2,380 panelists were selected for Wave 49. 4. Black or 18-34 panelists. There were 1,253 total panelists and they are sampled at a rate of 18.2%. 228 panelists were selected for Wave 49. 5. Other panelists. There were 4,176 total panelists and they are sampled at a rate of 13.5%. 564 panelists were selected for Wave 49.

#### Varaibles Used and Their Questions Phrasing


**Key Figure 1**

* `PUBLICDATA_W49` - "Today a wide range of information about people is searchable online. Do you think it is more important for people to have the ability to…"

* `RTBF` - "Do you think that ALL Americans should have the right to have the following information about themselves removed from public online search results?"

    - `RTBFa_W49` - "Data collected by law enforcement, such as criminal records or mugshots"
    
    - `RTBFb_W49` - "Information about their employment history or work record"
    
    - `RTBFc_W49` - "Negative media coverage"
    
    - `RTBFd_W49` - "Potentially embarrassing photos or videos"


**Key Figure 2**

* `FACE1` - "How much have you heard or read about the development of automated facial recognition technology that can identify someone based on a picture or video that includes their face?


* `FACE2` - "Based on what you know, how effective do you think facial recognition technology is at the following things?"
    
    - `FACE2a_W49` - "Accurately identifying individual people"  
    
    - `FACE2b_W49` - "Accurately assessing someone’s gender"  
        
    - `FACE2c_W49` - "Accurately assessing someone’s race" 
    
    
* `FACE3` - "How much, if at all, do you trust the following groups to use facial recognition technology responsibly?"
    
    - `FACE3a_W49` - "Advertisers"  
    
    - `FACE3b_W49` - "Technology companies"  
        
    - `FACE3c_W49` - "Law enforcement agencies" 
    
* `FACE4` - "In your opinion, is it acceptable or unacceptable to use facial recognition technology in the following situations?"
    
    - `FACE4a_W49` - "Law enforcement agencies assessing potential security threats in public spaces" 
    
    - `FACE4b_W49` - "Companies automatically tracking the attendance of their employees"  
        
    - `FACE4c_W49` - "Advertisers seeing how people respond to public advertising displays" 

    - `FACE4d_W49` - "Apartment building landlords tracking who enters or leaves their buildings"
    
* `KNOW1_W49` - "If a website uses cookies, it means that the site…

* `KNOW3_W49` - "When a website has a privacy policy, it means that the site… "

* `KNOW4_W49` - "What does it mean when a website has 'https://' at the beginning of its URL, as opposed to 'http://' without the 's'? "

* `KNOW7_W49` - "The term 'net neutrality' describes the principle that…"

* `KNOW8_W49` - "Many web browsers offer a feature known as 'private browsing' or 'incognito mode.' If someone opens a webpage on their computer at work using incognito mode, which of the following groups will NOT be able to see their online activities?"

* `KNOW9_W49` - "Some websites and online services use a security process known as two-step or two-factor authentication. Which of the following images is an example of two-factor authentication?"


* `CONCERNCO_W49` - "How concerned are you, if at all, about how companies are using the data they collect about you?"

### Additional Figures For Key Figure 1

### Additional Figures For Key Figure 2

#### 1. Underlying Distribution of Tech Literacy

```{r KNOW-Counts, echo=echoval}
pew %>% ggplot(aes(fill =sumKnowFactor, x = groupKnow)) +
  geom_bar(position = 'dodge', color = 'black') +
  scale_fill_brewer(palette = "Blues") +
  labs(
    title = "Distribution of Tech Literacy Scores",
    y = "Counts",
    x = "Literacy Category",
    fill = "Respondent's\nLiteracy Score",
    caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy"
  ) +  
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
        panel.background = element_blank(), axis.line = element_line(colour = "black"))
```

#### 2. How much have you heard or read about the development of automated facial recognition technology that can identify someone based on a picture or video that includes their face
```{r FACE2_Likert, echo=echoval, message=FALSE}
pew %>% filter(FACE1_W49 != "Refused") %>% ggplot(aes(x = groupKnow, fill = FACE1_W49)) +
  geom_bar(position = 'dodge', color = 'black') +
  scale_fill_brewer(palette = "Dark2") +
  labs(
    title = "Respondent's Familiarity With Facial Recognition",
    y = "Counts",
    x = "Literacy Category",
    fill = "How Much The Respondent\nKnows About Facial Recognition",
    caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy"
  ) +  
  theme(panel.grid.major = element_blank(), panel.grid.minor = element_blank(),
        panel.background = element_blank(), axis.line = element_line(colour = "black"))
```

#### 3. People's Understanding of Facial Recognition 
```{r FACE3_Likert, echo=echoval, message=FALSE}
###Generate the Data Frame###
## Create df of FACE2
df_f2 <- pew %>% filter(FACE2a_W49 != "Refused" & FACE2b_W49 != "Refused" & FACE2c_W49 != "Refused") %>%  dplyr::select(c(FACE2a_W49, FACE2b_W49, FACE2c_W49, groupKnow))

## Rename Cols
df_f2  <- df_f2  %>% 
  rename("Accurately identifying individual people" = FACE2a_W49,
          "Accurately assessing someone’s gender" = FACE2b_W49,
          "Accurately assessing someone’s race" = FACE2c_W49)
df_f2  <- as.data.frame(df_f2)
df_f2 <- droplevels(df_f2) #remove unused levels 
# df_f2 <- df_f2[, c(3,2,1,4)] #change order of cols for facets to come in nice order

## Reverse levels 
df_f2.reverse <- reverse.levels(df_f2)

                            
## Generate Title
titlef2 <- "How Effective Do Respondents Think Facial Recognition Is\nFaceted on Tech Literacy"

###Graph The Likert Data###
plot(likert(df_f2.reverse[,c(1:3)], grouping = df_f2.reverse[,4]), legend.position="right", centered = TRUE, plot.percents=TRUE, plot.percent.low=FALSE, plot.percent.high=FALSE, plot.percent.neutral=FALSE, center = 2.5) + 
  scale_fill_manual(values = brewer.pal(n=4,"RdBu"), breaks = rev(levels(df_f2$`Accurately identifying individual people`))) + #order and color the likert boxes
  ggtitle(titlef2) +
    labs(caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy")+
  guides(fill = guide_legend(title="Responses", reverse = TRUE)) #to reverse the order in the legend

##100 Pcnt bar chart
plot(likert(df_f2[,c(1:3)], grouping = df_f2.reverse[,4]), legend.position="right", centered = FALSE, plot.percents=TRUE, plot.percent.low=FALSE, plot.percent.high=FALSE, plot.percent.neutral=FALSE, center = 2.5) + 
  scale_fill_manual(values = brewer.pal(n=4,"RdBu"), breaks = rev(levels(df_f2$`Accurately identifying individual people`))) + #order and color the likert boxes
  ggtitle(titlef2) +
    labs(caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy")+
  guides(fill = guide_legend(title="Responses", reverse = TRUE)) #to reverse the order in the legend
```

#### 4. What situations People Think It Is Acceptable To Use Facial Recognition In the Following Situations?
```{r FACE4_Likert, echo=echoval, message=FALSE}
df_f4 <- pew %>% select(c(FACE4a_W49, FACE4b_W49, FACE4c_W49, FACE4d_W49, groupKnow))

df_f4 <- df_f4 %>% 
  rename("Law Enforcement Assesing Threats In Public Spaces" = FACE4a_W49,
          "Companies Tracking Employee Attendance" = FACE4b_W49,
          "Advertisers Measuring Responses To Public Displays" = FACE4c_W49,
          "Lanlords Tracking Who Enters and Leaves Their Building" = FACE4d_W49)
df_f4 <- as.data.frame(df_f4)
df_f4 <- droplevels(df_f4, exclude = c("Refused", "Not sure", "NA", "<NA>")) #remove unused levels
df_f4 <- droplevels(df_f4)

## Reverse levels 
df_f4.reverse <- reverse.levels(df_f4)
df_f4.reverse2 <- reverse.levels(df_f4.reverse) #R wackyness reverse takes away NA so to get fd_f4 without NA we need to reverse the reverse

titlef4 <- "Opinions on Facial Recognition Use Faceted on Tech Litercay"

###Graph The Likert Data###
plot(likert(df_f4.reverse[,c(1:4)], grouping = df_f4.reverse[,5]), legend.position="right", plot.percents=FALSE, plot.percent.low=FALSE, plot.percent.high=FALSE, plot.percent.neutral=FALSE, center = 1.5) +
  scale_fill_manual(values = brewer.pal(n=4,"RdBu"), breaks = c("NA", "Not sure", "Unacceptable", "Acceptable")) + #order and color the likert boxes
  ggtitle(titlef4) +
    labs(caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy")+
  guides(fill = guide_legend(title="Responses", reverse = TRUE)) #to reverse the order in the legend

##100 Pcnt bar chart
plot(likert(df_f4.reverse2[,c(1:4)], grouping = df_f4.reverse[,5]), legend.position="right", centered = FALSE, plot.percents=FALSE, plot.percent.low=FALSE, plot.percent.high=FALSE, plot.percent.neutral=FALSE,) +
  scale_fill_manual(values = brewer.pal(n=4,"RdBu"), breaks = c("NA", "Not sure", "Unacceptable", "Acceptable")) + #order and color the likert boxes
  ggtitle(titlef4) +
    labs(caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy")+
  guides(fill = guide_legend(title="Responses", reverse = TRUE)) #to reverse the order in the legend
```

### Additional Tables For Key Figure 1

### Additional Tables For Key Figure 2

```{r KF2-tables, echo=echoval}
KF2_T <- summary(likert(df_f3.reverse[,c(1:3)], grouping = df_f3.reverse[,4]))
KF2_T1 <- KF2_T[, c(1,2,3,5,6)] # remove neutral column b/c it isn't relevant
KFT_T2 <- KF2_T[, c(1,2,6,7)] # remove neutral column b/c it isn't relevant

##Render Tables
knitr::kable(KF2_T1, "simple", caption = "Summary Statistics For Key Figure 2")
knitr::kable(KFT_T2, "simple", caption = "Numeric Summary That Involves Uncertainty For Key Figure 2")
```

### Discussion of Uncertainty & Inference

**Key Figure 1**

**Key Figure 2**

### Discussion of Analytic  Choices

**Key Figure 1**

**Key Figure 2**

### Discussion Of Other Ways We Could Have Made Our Key Figure

**Key Figure 1**

BLAH BLAH BLAH

```{r RTBF alt, echo=echoval}

```


**Key Figure 2**

I choose to to the likert graph instead of the 100% complete bar chart because..... BLAH BLAH BLAH

```{r FACE3 Alt, echo=echoval, message=FALSE}
## 100% BarPlot
plot(likert(df_f3[,c(1:3)], grouping = df_f3.reverse[,4]), legend.position="right", centered = FALSE, plot.percents=TRUE, plot.percent.low=FALSE, plot.percent.high=FALSE, plot.percent.neutral=FALSE, center = 2.5) + 
  scale_fill_manual(values = brewer.pal(n=4,"RdBu"), breaks = c("Not at all", "Not too much", "Somewhat", "A great deal")) + #order and color the likert boxes
  ggtitle(title2) +
  labs(caption = "Data sourced from\n2019 PEW American Trends Panel\nSurvey on Social Media Usage and\nPerceptions of Digital Privacy")+
  guides(fill = guide_legend(title="Responses", reverse = TRUE)) #to reverse the order in the legend
```


NOTE: NEED TO CREATE AND INCLUDE ALT. VERSION OF KEY FIGURE IN THIS SECTION


